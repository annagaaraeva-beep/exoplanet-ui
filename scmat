import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt

url = "https://exoplanetarchive.ipac.caltech.edu/TAP/sync?query=select+*+from+pscomppars&format=csv"
df = pd.read_csv(url)

columns = ['pl_orbper', 'pl_rade', 'pl_bmasse', 'pl_eqt', 'st_teff', 'st_rad', 'st_mass']
df_filtered = df[columns].dropna().copy()

df_sample = df_filtered.sample(n=1000, random_state=42)

df_log = df_sample.apply(lambda x: np.log10(x) if np.issubdtype(x.dtype, np.number) else x)

sns.set(style="ticks")

pair_plot = sns.pairplot(df_log, diag_kind='kde', plot_kws={'alpha':0.5, 's':20})

pair_plot.fig.suptitle("Scatterplot Matrix of Exoplanet Parameters (log scale, sample 1000)", y=1.02)
pair_plot.fig.subplots_adjust(top=0.95)

plt.show()
